(this["webpackJsonpes-legends-api-demo-client"]=this["webpackJsonpes-legends-api-demo-client"]||[]).push([[0],{21:function(e,t,a){e.exports=a(40)},32:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(3),l=a(1),s=a(20),o=a(11),i=a.n(o),u=a(16),m=function(e){return{error:e,type:"HANDLE_FETCH_ERROR"}},d=function(){return function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a(),n=r.nextPageUrl,!r.loading){e.next=3;break}return e.abrupt("return");case 3:return t({type:"REQUEST_CARDS"}),e.abrupt("return",fetch(n).then((function(e){return e.json()})).then((function(e){return t({cards:(a=e).cards,nextPageUrl:a.nextPageUrl,type:"RECEIVE_CARDS"});var a})).catch((function(e){return t(m(e))})));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()};a(32);function E(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.searchTerm})),a=Object(r.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1],u=function(){o&&(e({term:o,type:"SEARCH_CARDS"}),i(""))};return n.a.createElement("div",{className:"search pure-form"},n.a.createElement("input",{type:"text",className:"pure-input",placeholder:"Card name",value:o,onChange:function(e){var t=e.target;return i(t.value)},onKeyPress:function(e){"Enter"===e.key&&u()}}),t&&n.a.createElement("div",{className:"search__clear-btn",onClick:function(){e({type:"CLEAR_SEARCH"}),i("")}},"X"),n.a.createElement("button",{className:"pure-button pure-button-primary",type:"button",disabled:!1,onClick:u},"Search"))}var h=a(7),p=a(17),f=a.n(p);a(35);function g(e){var t=e.name,a=e.rarity,r=e.type,c=e.subtypes,l=e.cost,s=e.power,o=e.health,i=e.set,u=e.text,m=e.imageUrl;return n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card__image"},n.a.createElement(h.LazyLoadImage,{alt:t,height:580,src:m,width:350})),n.a.createElement("div",{className:"card__details"},n.a.createElement("div",{className:"card__name"},t),n.a.createElement("div",{className:"card__rarity"},a),n.a.createElement("div",{className:"card__type"},r," \u2014\xa0",n.a.createElement("span",{className:"card__stats"},l," mana",o&&n.a.createElement("span",{className:"card__power-health"},"\xa0","".concat(s,"/").concat(o))),c&&n.a.createElement("span",{className:"card__subtypes"},"\xa0",c.join(", "))),n.a.createElement("div",{className:"card_set"},i.name),n.a.createElement("div",{className:"card_text"},u)))}var v=a(18),b=a.n(v);a(36);function _(){return n.a.createElement("div",{className:"loading-placeholder","data-testid":"loadingPlaceholder"},n.a.createElement(b.a,{type:"bars",color:"#333",height:"100px",width:"200px"}))}_.defaultProps={show:!1};a(37);var y=Object(h.trackWindowScroll)((function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return{cards:e.cards,loading:e.loading,nextPageUrl:e.nextPageUrl,searchTerm:e.searchTerm}})),a=t.cards,c=t.loading,s=t.nextPageUrl,o=t.searchTerm;return Object(r.useEffect)((function(){function t(){if(!c&&s){var t=document.documentElement,a=t.scrollTop,r=t.offsetHeight;window.innerHeight+a>r-300&&e(d())}}return!a.length&&s&&e(d()),window.addEventListener("scroll",t),function(){return window.removeEventListener("scroll",t)}}),[e,a,c,s]),n.a.createElement("div",{className:"search-results"},o&&!c&&n.a.createElement("h2",null,'Results for "',o,'"'),0===a.length&&!s&&n.a.createElement("div",{className:"search-results__empty"},"No results"),a&&a.map((function(e){return n.a.createElement(g,Object.assign({key:e.id},e))})),n.a.createElement(f.a,null),c&&n.a.createElement(_,null))}));a(38);function w(){return n.a.createElement("div",{className:"app"},n.a.createElement("h1",null,"The Elder Scrolls: Legends"),n.a.createElement("h2",null,"Search Cards"),n.a.createElement(E,null),n.a.createElement(y,null))}var R=a(4),j=a(19),N=a(12),O=a(2);function x(e,t){switch(t.type){case"REQUEST_CARDS":return Object(O.a)({},e,{loading:!0});case"RECEIVE_CARDS":var a=t.cards,r=t.nextPageUrl;return Object(O.a)({},e,{nextPageUrl:r,cards:[].concat(Object(N.a)(e.cards),Object(N.a)(a)),loading:!1});case"SEARCH_CARDS":return Object(O.a)({},e,{cards:[],nextPageUrl:"".concat(C.nextPageUrl,"&name=").concat(t.term),searchTerm:t.term});case"CLEAR_SEARCH":return Object(O.a)({},e,{cards:[],nextPageUrl:C.nextPageUrl,searchTerm:C.searchTerm});case"HANDLE_FETCH_ERROR":return Object(O.a)({},e,{loading:!1,error:t.error});default:return e}}var C={cards:[],error:null,loading:!1,nextPageUrl:"/api/cards?page=1",searchTerm:""};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(39);var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=Object(R.a)(j.a);return Object(R.c)(x,e,t)}();Object(c.render)(n.a.createElement(n.a.StrictMode,null,n.a.createElement(l.a,{store:S},n.a.createElement(w,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.c24c3459.chunk.js.map