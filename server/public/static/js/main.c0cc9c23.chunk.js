(this["webpackJsonpes-legends-api-demo-client"]=this["webpackJsonpes-legends-api-demo-client"]||[]).push([[0],{21:function(e,t,a){e.exports=a(40)},32:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),l=a(1),o=a(20),s=a(11),i=a.n(s),u=a(16),d=function(e){return{error:e,type:"HANDLE_FETCH_ERROR"}},m=function(){return function(){var e=Object(u.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a(),r=n.nextPageUrl,!n.loading){e.next=3;break}return e.abrupt("return");case 3:return t({type:"REQUEST_CARDS"}),e.abrupt("return",fetch(r).then((function(e){return e.json()})).then((function(e){return t({cards:(a=e).cards,nextPageUrl:a.nextPageUrl,type:"RECEIVE_CARDS"});var a})).catch((function(e){return t(d(e))})));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()};a(32);function E(){var e=Object(l.b)(),t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1],i=function(){c&&e({term:c,type:"SEARCH_CARDS"})};return r.a.createElement("div",{className:"search pure-form"},r.a.createElement("input",{type:"text",className:"pure-input",placeholder:"Card name",value:c,onChange:function(e){var t=e.target;return s(t.value)},onKeyPress:function(e){"Enter"===e.key&&i()}}),r.a.createElement("button",{className:"pure-button pure-button-primary",type:"button",disabled:!1,onClick:i},"Search"))}var p=a(7),f=a(17),g=a.n(f);a(35);function h(e){var t=e.name,a=e.rarity,n=e.type,c=e.subtypes,l=e.cost,o=e.power,s=e.health,i=e.set,u=e.text,d=e.imageUrl;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card__image"},r.a.createElement(p.LazyLoadImage,{alt:t,height:580,src:d,width:350})),r.a.createElement("div",{className:"card__details"},r.a.createElement("div",{className:"card__name"},t),r.a.createElement("div",{className:"card__rarity"},a),r.a.createElement("div",{className:"card__type"},n," \u2014\xa0",r.a.createElement("span",{className:"card__stats"},l," mana",s&&r.a.createElement("span",{className:"card__power-health"},"\xa0","".concat(o,"/").concat(s))),c&&r.a.createElement("span",{className:"card__subtypes"},"\xa0",c.join(", "))),r.a.createElement("div",{className:"card_set"},i.name),r.a.createElement("div",{className:"card_text"},u)))}var v=a(18),b=a.n(v);a(36);function _(e){e.show;return r.a.createElement("div",{className:"loading-placeholder"},r.a.createElement(b.a,{type:"bars",color:"#333",height:"100px",width:"200px"}))}_.defaultProps={show:!1};a(37);var w=Object(p.trackWindowScroll)((function(){var e=Object(n.useRef)(),t=Object(l.b)(),a=Object(l.c)((function(e){return{cards:e.cards,loading:e.loading,nextPageUrl:e.nextPageUrl}})),c=a.cards,o=a.loading,s=a.nextPageUrl;return Object(n.useEffect)((function(){function e(){if(!o&&s){var e=document.documentElement,a=e.scrollTop,n=e.offsetHeight;window.innerHeight+a>n-300&&t(m())}}return c.length||t(m()),window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[t,c,o,s]),r.a.createElement("div",{className:"search-results",ref:e},c.map((function(e){return r.a.createElement(h,Object.assign({key:e.id},e))})),r.a.createElement(g.a,null),o&&r.a.createElement(_,null))}));a(38);function j(){return r.a.createElement("div",{className:"app"},r.a.createElement("h1",null,"The Elder Scrolls: Legends"),r.a.createElement("h2",null,"Search Cards"),r.a.createElement(E,null),r.a.createElement(w,null))}var y=a(4),O=a(19),x=a(12),R=a(2);function N(e,t){switch(t.type){case"REQUEST_CARDS":return Object(R.a)({},e,{loading:!0});case"RECEIVE_CARDS":var a=t.cards,n=t.nextPageUrl;return Object(R.a)({},e,{nextPageUrl:n,cards:[].concat(Object(x.a)(e.cards),Object(x.a)(a)),loading:!1});case"SEARCH_CARDS":return Object(R.a)({},e,{cards:[],nextPageUrl:"".concat(C.nextPageUrl,"&name=").concat(t.term)});case"CLEAR_SEARCH":return Object(R.a)({},e,{cards:[],nextPageUrl:C.nextPageUrl});case"HANDLE_FETCH_ERROR":return Object(R.a)({},e,{loading:!1,error:t.error});default:return e}}var C={cards:[],error:null,loading:!1,nextPageUrl:"/api/cards?page=1"};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(39);var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=Object(y.a)(O.a);return Object(y.c)(N,e,t)}();Object(c.render)(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:S},r.a.createElement(j,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.c0cc9c23.chunk.js.map